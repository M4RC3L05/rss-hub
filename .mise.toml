[settings]
experimental = true
pipx_uvx = true

[tools]
uv = "latest"
deno = "1.46"
yamllint = "latest"
sqlite = "3.46.0"
yamlfmt = "latest"
"pipx:sqlfluff/sqlfluff" = "latest"

[tasks."check:format"]
run = """
#!/usr/bin/env sh

set -ex

deno fmt --check
deno run -A --no-lock npm:prettier -c "./**/*.{html,css}"
yamlfmt -dry -lint $(find . -type f | grep -E "\\.yaml$|\\.yml$" | grep -v "node_modules/")
"""

[tasks."check:lint"]
run = """
#!/usr/bin/env sh

set -ex

deno lint
deno check --no-lock $(find . -type f | grep -E "\\.ts$|\\.tsx$" | grep -v "node_modules/")
deno run -A --no-lock npm:markdownlint-cli2 "**/*.{md,markdown}" "#node_modules"
yamllint $(find . -type f | grep -E "\\.yaml$|\\.yml$" | grep -v "node_modules/")
sqlfluff lint $(find . -type f | grep -E "\\.sql$" | grep -v "node_modules/")
"""
